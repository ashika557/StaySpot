{% extends "admin/base.html" %}
{% load i18n static %}

{% block extrahead %}
{{ block.super }}
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
<style>
    :root {
        --primary-blue: #2563eb;
        --sidebar-width: 260px;
        --header-height: 70px;
        --content-bg: #F8F9FC;
        --border-color: #E2E8F0;
        --text-main: #1E293B;
        --text-muted: #64748B;
        --card-shadow: 0 1px 3px rgba(0, 0, 0, 0.1), 0 1px 2px rgba(0, 0, 0, 0.06);
    }

    body {
        font-family: 'Inter', sans-serif !important;
        background-color: var(--content-bg) !important;
        color: var(--text-main);
        margin: 0;
    }

    #container {
        display: flex;
        width: 100%;
        min-height: 100vh;
        flex-direction: row !important;
    }

    /* Fix for Django's default structure */
    #header {
        position: fixed !important;
        top: 0;
        right: 0;
        left: var(--sidebar-width) !important;
        height: var(--header-height) !important;
        background: white !important;
        border-bottom: 1px solid var(--border-color) !important;
        display: flex !important;
        align-items: center;
        justify-content: space-between;
        padding: 0 40px !important;
        z-index: 1000 !important;
        box-shadow: none !important;
        color: var(--text-main) !important;
    }

    /* Sidebar - Positioned fixed and outside the header */
    .custom-sidebar {
        width: var(--sidebar-width);
        background: #ffffff;
        border-right: 1px solid var(--border-color);
        position: fixed;
        top: 0;
        left: 0;
        bottom: 0;
        z-index: 1100;
        display: flex;
        flex-direction: column;
    }

    .sidebar-brand {
        padding: 24px;
        border-bottom: 1px solid var(--border-color);
        display: flex;
        align-items: center;
        gap: 12px;
    }

    .brand-logo {
        width: 32px;
        height: 32px;
        background: #00A3C1;
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
    }

    .brand-text h1 {
        font-size: 18px !important;
        font-weight: 800 !important;
        margin: 0 !important;
        color: var(--text-main) !important;
        padding: 0 !important;
        background: none !important;
    }

    .sidebar-nav {
        padding: 20px 12px;
        flex: 1;
    }

    .nav-label {
        font-size: 11px;
        text-transform: uppercase;
        color: var(--text-muted);
        font-weight: 700;
        margin: 24px 12px 12px;
        letter-spacing: 0.05em;
    }

    .nav-item {
        display: flex;
        align-items: center;
        gap: 12px;
        padding: 10px 16px;
        border-radius: 10px;
        color: var(--text-muted) !important;
        text-decoration: none !important;
        font-weight: 600;
        font-size: 14px;
        margin-bottom: 4px;
        transition: all 0.2s;
    }

    .nav-item svg {
        width: 18px;
        height: 18px;
        opacity: 0.7;
    }

    .nav-item:hover {
        background: #F1F5F9;
        color: var(--primary-blue) !important;
    }

    .nav-item.active {
        background: #EFF6FF;
        color: var(--primary-blue) !important;
    }

    .nav-item.active svg {
        color: var(--primary-blue);
        opacity: 1;
    }

    /* Content Area */
    #content,
    .breadcrumbs {
        margin-left: var(--sidebar-width) !important;
        width: calc(100% - var(--sidebar-width)) !important;
        box-sizing: border-box !important;
        position: relative;
        top: var(--header-height);
    }

    #content {
        padding: 40px !important;
        min-height: calc(100vh - var(--header-height));
        background: var(--content-bg) !important;
    }

    /* Hide unneded elements */
    #user-tools,
    #nav-sidebar,
    .breadcrumbs,
    #header .branding h1 {
        display: none !important;
    }

    .main.shifted {
        margin-left: 0 !important;
    }

    /* Custom Header Controls */
    .header-content {
        display: flex;
        width: 100%;
        justify-content: space-between;
        align-items: center;
    }

    .header-left h1 {
        font-size: 20px !important;
        font-weight: 800 !important;
        margin: 0 !important;
        color: var(--text-main) !important;
    }

    .user-profile {
        display: flex;
        align-items: center;
        gap: 12px;
    }

    .user-info {
        text-align: right;
        line-height: 1.2;
    }

    .user-name {
        font-weight: 700;
        font-size: 14px;
        color: var(--text-main);
    }

    .user-role {
        font-size: 12px;
        color: var(--text-muted);
    }

    .user-initial {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background: #FDE047;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 800;
        color: #854D0E;
    }
</style>
{% endblock %}

{% block branding %}
<div class="custom-sidebar">
    <div class="sidebar-brand">
        <div class="brand-logo">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"
                stroke-linejoin="round">
                <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                <polyline points="9 22 9 12 15 12 15 22"></polyline>
            </svg>
        </div>
        <div class="brand-text">
            <h1>StaySpot</h1>
        </div>
    </div>
    <div class="sidebar-nav">
        <a href="{% url 'admin:index' %}" class="nav-item">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                stroke-linejoin="round">
                <rect x="3" y="3" width="7" height="7"></rect>
                <rect x="14" y="3" width="7" height="7"></rect>
                <rect x="14" y="14" width="7" height="7"></rect>
                <rect x="3" y="14" width="7" height="7"></rect>
            </svg>
            Dashboard
        </a>
        <div class="nav-label">Management</div>
        <a href="/admin/accounts/user/"
            class="nav-item {% if '/admin/accounts/user/' in request.path %}active{% endif %}">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                stroke-linejoin="round">
                <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                <circle cx="9" cy="7" r="4"></circle>
                <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
            </svg>
            Manage Users
        </a>
        <a href="/admin/OwnerRooms/room/"
            class="nav-item {% if '/admin/OwnerRooms/room/' in request.path %}active{% endif %}">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                stroke-linejoin="round">
                <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                <polyline points="9 22 9 12 15 12 15 22"></polyline>
            </svg>
            Manage Rooms
        </a>
        <a href="/admin/OwnerRooms/complaint/"
            class="nav-item {% if '/admin/OwnerRooms/complaint/' in request.path %}active{% endif %}">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                stroke-linejoin="round">
                <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z">
                </path>
                <line x1="12" y1="9" x2="12" y2="13"></line>
                <line x1="12" y1="17" x2="12.01" y2="17"></line>
            </svg>
            Complaints
        </a>
        <a href="/admin/auth/group/" class="nav-item {% if '/admin/auth/group/' in request.path %}active{% endif %}">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                stroke-linejoin="round">
                <circle cx="12" cy="12" r="3"></circle>
                <path
                    d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z">
                </path>
            </svg>
            Settings
        </a>
    </div>
</div>
{% endblock %}

{% block userlinks %}
<div class="header-content">
    <div class="header-left">
        <h1>{{ title|default:"Dashboard" }}</h1>
    </div>
    <div class="user-profile">
        <div class="user-info">
            <div class="user-name">{{ user.username }}</div>
            <div class="user-role">Administrator</div>
        </div>
        <div class="user-initial">
            {{ user.username|slice:":1"|upper }}
        </div>
    </div>
</div>
{% endblock %}